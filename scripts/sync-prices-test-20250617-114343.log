=== TEST DE SINCRONIZACIÓN DE PRECIOS POR LOTES ===
2025-06-17 11:43:43

[2025-06-17 11:43:43] Iniciando prueba de sincronización de precios por lotes
[2025-06-17 11:43:43] Tamaño de lote: 5
[2025-06-17 11:43:43] Lotes máximos a procesar: 3
[2025-06-17 11:43:43] Total máximo de productos: 15
[2025-06-17 11:43:43] Obteniendo instancia de Sync_Manager
[2025-06-17 11:43:43] Comprobando estado de la API...
[2025-06-17 11:43:43] Configuración de API:
Array
(
    [url] => http://x.verial.org:8000/WcfServiceLibraryVerial
    [session_id] => 18
)

[2025-06-17 11:43:43] Probando conexión a la API de Verial...
[2025-06-17 11:43:43] Conexión a la API establecida correctamente
[2025-06-17 11:43:43] === COMENZANDO SIMULACIÓN DE SINCRONIZACIÓN DE PRECIOS POR LOTES ===
[2025-06-17 11:43:43] Obteniendo lista inicial de productos (máximo 15)...
[2025-06-17 11:43:43] Se obtuvieron 15 productos para sincronizar
[2025-06-17 11:43:43] 
=== PROCESANDO LOTE #1 (productos 0 - 4) ===
[2025-06-17 11:43:43] Procesando producto: Producto de prueba 1 (ID: 1, REF: REF-1)
[2025-06-17 11:43:43] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:43] ✅ Precio encontrado para producto 'Producto de prueba 1':
Array
(
    [precio_base] => 48.13
    [precio_oferta] => No hay oferta
)

[2025-06-17 11:43:43] Datos para WooCommerce:
Array
(
    [sku] => REF-1
    [name] => Producto de prueba 1
    [regular_price] => 48.13
    [sale_price] => 
)

[2025-06-17 11:43:43] Procesando producto: Producto de prueba 2 (ID: 2, REF: REF-2)
[2025-06-17 11:43:43] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:43] ✅ Precio encontrado para producto 'Producto de prueba 2':
Array
(
    [precio_base] => 5.62
    [precio_oferta] => 4.8332
)

[2025-06-17 11:43:43] Datos para WooCommerce:
Array
(
    [sku] => REF-2
    [name] => Producto de prueba 2
    [regular_price] => 5.62
    [sale_price] => 4.8332
)

[2025-06-17 11:43:43] Procesando producto: Producto de prueba 3 (ID: 3, REF: REF-3)
[2025-06-17 11:43:43] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:43] ✅ Precio encontrado para producto 'Producto de prueba 3':
Array
(
    [precio_base] => 42.42
    [precio_oferta] => 41.9958
)

[2025-06-17 11:43:43] Datos para WooCommerce:
Array
(
    [sku] => REF-3
    [name] => Producto de prueba 3
    [regular_price] => 42.42
    [sale_price] => 41.9958
)

[2025-06-17 11:43:43] Procesando producto: Producto de prueba 4 (ID: 4, REF: REF-4)
[2025-06-17 11:43:43] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:43] ✅ Precio encontrado para producto 'Producto de prueba 4':
Array
(
    [precio_base] => 35.35
    [precio_oferta] => 31.4615
)

[2025-06-17 11:43:43] Datos para WooCommerce:
Array
(
    [sku] => REF-4
    [name] => Producto de prueba 4
    [regular_price] => 35.35
    [sale_price] => 31.4615
)

[2025-06-17 11:43:43] Procesando producto: Producto de prueba 5 (ID: 5, REF: REF-5)
[2025-06-17 11:43:43] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:43] ✅ Precio encontrado para producto 'Producto de prueba 5':
Array
(
    [precio_base] => 65.47
    [precio_oferta] => 64.8153
)

[2025-06-17 11:43:43] Datos para WooCommerce:
Array
(
    [sku] => REF-5
    [name] => Producto de prueba 5
    [regular_price] => 65.47
    [sale_price] => 64.8153
)

[2025-06-17 11:43:44] 
--- Estadísticas del lote #1 ---
[2025-06-17 11:43:44] Productos procesados: 5
[2025-06-17 11:43:44] Productos con precio: 5
[2025-06-17 11:43:44] Productos sin precio: 0
[2025-06-17 11:43:44] Errores encontrados: 0
[2025-06-17 11:43:44] Tiempo de procesamiento: 0.5 segundos
[2025-06-17 11:43:44] Uso de memoria después del lote: 2 MB
[2025-06-17 11:43:45] 
=== PROCESANDO LOTE #2 (productos 5 - 9) ===
[2025-06-17 11:43:45] Procesando producto: Producto de prueba 6 (ID: 6, REF: REF-6)
[2025-06-17 11:43:45] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:45] ✅ Precio encontrado para producto 'Producto de prueba 6':
Array
(
    [precio_base] => 0.48
    [precio_oferta] => 0.4368
)

[2025-06-17 11:43:45] Datos para WooCommerce:
Array
(
    [sku] => REF-6
    [name] => Producto de prueba 6
    [regular_price] => 0.48
    [sale_price] => 0.4368
)

[2025-06-17 11:43:45] Procesando producto: Producto de prueba 7 (ID: 7, REF: REF-7)
[2025-06-17 11:43:45] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:45] ❌ No se encontró precio para el producto 'Producto de prueba 7'
[2025-06-17 11:43:45] Datos para WooCommerce:
Array
(
    [sku] => REF-7
    [name] => Producto de prueba 7
    [regular_price] => 
    [sale_price] => 
)

[2025-06-17 11:43:45] Procesando producto: Producto de prueba 8 (ID: 8, REF: REF-8)
[2025-06-17 11:43:45] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:45] ✅ Precio encontrado para producto 'Producto de prueba 8':
Array
(
    [precio_base] => 19.69
    [precio_oferta] => 17.5241
)

[2025-06-17 11:43:45] Datos para WooCommerce:
Array
(
    [sku] => REF-8
    [name] => Producto de prueba 8
    [regular_price] => 19.69
    [sale_price] => 17.5241
)

[2025-06-17 11:43:45] Procesando producto: Producto de prueba 9 (ID: 9, REF: REF-9)
[2025-06-17 11:43:45] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:45] ✅ Precio encontrado para producto 'Producto de prueba 9':
Array
(
    [precio_base] => 12.53
    [precio_oferta] => 10.5252
)

[2025-06-17 11:43:45] Datos para WooCommerce:
Array
(
    [sku] => REF-9
    [name] => Producto de prueba 9
    [regular_price] => 12.53
    [sale_price] => 10.5252
)

[2025-06-17 11:43:45] Procesando producto: Producto de prueba 10 (ID: 10, REF: REF-10)
[2025-06-17 11:43:45] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:45] ✅ Precio encontrado para producto 'Producto de prueba 10':
Array
(
    [precio_base] => 43.92
    [precio_oferta] => 39.9672
)

[2025-06-17 11:43:45] Datos para WooCommerce:
Array
(
    [sku] => REF-10
    [name] => Producto de prueba 10
    [regular_price] => 43.92
    [sale_price] => 39.9672
)

[2025-06-17 11:43:45] 
--- Estadísticas del lote #2 ---
[2025-06-17 11:43:45] Productos procesados: 5
[2025-06-17 11:43:45] Productos con precio: 4
[2025-06-17 11:43:45] Productos sin precio: 1
[2025-06-17 11:43:45] Errores encontrados: 0
[2025-06-17 11:43:45] Tiempo de procesamiento: 0.5 segundos
[2025-06-17 11:43:45] Uso de memoria después del lote: 2 MB
[2025-06-17 11:43:46] 
=== PROCESANDO LOTE #3 (productos 10 - 14) ===
[2025-06-17 11:43:46] Procesando producto: Producto de prueba 11 (ID: 11, REF: REF-11)
[2025-06-17 11:43:46] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:46] ❌ No se encontró precio para el producto 'Producto de prueba 11'
[2025-06-17 11:43:46] Datos para WooCommerce:
Array
(
    [sku] => REF-11
    [name] => Producto de prueba 11
    [regular_price] => 
    [sale_price] => 
)

[2025-06-17 11:43:46] Procesando producto: Producto de prueba 12 (ID: 12, REF: REF-12)
[2025-06-17 11:43:46] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:46] ✅ Precio encontrado para producto 'Producto de prueba 12':
Array
(
    [precio_base] => 92.17
    [precio_oferta] => 82.953
)

[2025-06-17 11:43:46] Datos para WooCommerce:
Array
(
    [sku] => REF-12
    [name] => Producto de prueba 12
    [regular_price] => 92.17
    [sale_price] => 82.953
)

[2025-06-17 11:43:46] Procesando producto: Producto de prueba 13 (ID: 13, REF: REF-13)
[2025-06-17 11:43:46] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:46] ✅ Precio encontrado para producto 'Producto de prueba 13':
Array
(
    [precio_base] => 30.42
    [precio_oferta] => 26.1612
)

[2025-06-17 11:43:46] Datos para WooCommerce:
Array
(
    [sku] => REF-13
    [name] => Producto de prueba 13
    [regular_price] => 30.42
    [sale_price] => 26.1612
)

[2025-06-17 11:43:46] Procesando producto: Producto de prueba 14 (ID: 14, REF: REF-14)
[2025-06-17 11:43:46] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:46] ❌ No se encontró precio para el producto 'Producto de prueba 14'
[2025-06-17 11:43:46] Datos para WooCommerce:
Array
(
    [sku] => REF-14
    [name] => Producto de prueba 14
    [regular_price] => 
    [sale_price] => 
)

[2025-06-17 11:43:46] Procesando producto: Producto de prueba 15 (ID: 15, REF: REF-15)
[2025-06-17 11:43:46] Detectada estructura CondicionesTarifa
[2025-06-17 11:43:46] ✅ Precio encontrado para producto 'Producto de prueba 15':
Array
(
    [precio_base] => 44.05
    [precio_oferta] => 39.2045
)

[2025-06-17 11:43:46] Datos para WooCommerce:
Array
(
    [sku] => REF-15
    [name] => Producto de prueba 15
    [regular_price] => 44.05
    [sale_price] => 39.2045
)

[2025-06-17 11:43:47] 
--- Estadísticas del lote #3 ---
[2025-06-17 11:43:47] Productos procesados: 5
[2025-06-17 11:43:47] Productos con precio: 3
[2025-06-17 11:43:47] Productos sin precio: 2
[2025-06-17 11:43:47] Errores encontrados: 0
[2025-06-17 11:43:47] Tiempo de procesamiento: 0.5 segundos
[2025-06-17 11:43:47] Uso de memoria después del lote: 2 MB
[2025-06-17 11:43:48] 
=== ESTADÍSTICAS FINALES DE SINCRONIZACIÓN ===
[2025-06-17 11:43:48] Lotes procesados: 3
[2025-06-17 11:43:48] Productos procesados: 15
[2025-06-17 11:43:48] Productos con precio: 12 (80%)
[2025-06-17 11:43:48] Productos sin precio: 3 (20%)
[2025-06-17 11:43:48] Errores encontrados: 0
[2025-06-17 11:43:48] 
=== ANÁLISIS Y RECOMENDACIONES ===
[2025-06-17 11:43:48] ⚠️ Se detectaron 3 productos sin precio. Revisar la estructura de respuesta de la API para estos productos.
[2025-06-17 11:43:48] ⚠️ Menos del 90% de los productos tienen precios. Puede haber un problema con la API o con la configuración de precios.
[2025-06-17 11:43:48] Uso máximo de memoria durante la ejecución: 2 MB
[2025-06-17 11:43:48] ✅ El uso de memoria se mantuvo en niveles aceptables.
[2025-06-17 11:43:48] 
Test completado. Archivo de log guardado en: /home/christian/Documentos/Poyectos/mi-integracion-api/scripts/sync-prices-test-20250617-114343.log
